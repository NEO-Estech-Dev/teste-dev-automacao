"use strict";var _functions=require("../functions.js");document.addEventListener("DOMContentLoaded",function(){$(document).ready(function(){$("#collapseExample").val()})}),$(document).ready(function(){(0,_functions.Estados)()});var form=document.getElementById("form-env-cad");function SubmitCad(){var e,n=$("#nome-Completo").val(),a=$("#email-Input").val(),o=$("#telefone-Input").val(),t=$("#genero-Select").val(),r=($("#arquivo-Input").val(),$("#date-nasc-Input").val()),i=$("#select-cidade").val(),s=$("#select-estado").val(),c=$("#formacoes").val(),d=$("#passwordCandidato").val();document.getElementById("arquivo-Input"),$(".nivel-formacao").each(function(){e=$(this).val()}),$(".nameFormacao").each(function(){c=1==e?"sem formacao":$(this).val()}),(0,_functions.saveStorage)(n,a,o,t,r,i,s);var l=(0,_functions.validacampos)(n,a,o,t,r,i,s,c);(0,_functions.Error)(l),enviFormulario(n,a,o,t,r,i,s,c,e,d)}form.addEventListener("submit",function(e){e.preventDefault(),SubmitCad()});var index=1;function bindSelectChangeEvents(){$(".nivel-formacao").off("change").on("change",function(){var e=$(this).closest(".formacao-bloco").find(".curso-nome");if($(this).val()){if(e.hide(),1==$(this).val())return;e.show()}else e.hide(),e.find("input").val("")})}function enviFormulario(n,a,o,t,r,i,s,c,d,l){var u,m,p,v,f,h;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return u=new FormData,m=document.getElementById("arquivo-Input"),p=m.files,u=new FormData,v=p[0],u.append("arquivoCv",v,v.name),u.append("nome",n),u.append("email",a),u.append("phone",o),u.append("genero",t),u.append("dataNasc",r),u.append("city",i),u.append("estado",s),u.append("formacoes",c),u.append("nivelFormacao",d),u.append("password",l),u.append("tipo",0),e.prev=17,e.next=20,regeneratorRuntime.awrap(fetch((0,_functions.urlMaster)()+"/api/Cadastro",{method:"POST",body:u,headers:{"X-CSRF-TOKEN":(0,_functions.pushToken)()}}));case 20:if((f=e.sent).ok){e.next=24;break}throw console.log(f.json),new _functions.Error("Erro na requisição: ".concat(f.Status));case 24:return e.next=26,regeneratorRuntime.awrap(f.json());case 26:(h=e.sent).Status,(0,_functions.montarmsg)(h.Message),e.next=33;break;case 30:e.prev=30,e.t0=e.catch(17),console.error("Erro ao enviar arquivo:",e.t0);case 33:case"end":return e.stop()}},null,null,[[17,30]])}$("#add-formacao").on("click",function(){var e='\n    <div class="formacao-bloco mb-3">\n      <label class="form-label">Formação Acadêmica</label>\n      <select class="form-control nivel-formacao" id="formacoes['.concat(index,'][nivel]" name="formacoes[').concat(index,'][nivel]">\n        <option value="0">Selecione</option>\n        <option value="1">Ensino Médio</option>\n        <option value="2">Graduação</option>\n        <option value="3">Pós-graduação</option>\n      </select>\n\n      <div class="mt-2 curso-nome" style="display: none;">\n        <label>Nome do Curso</label>\n        <input type="text" class="form-control nameFormacao[').concat(index,'][curso]" id="nameFormacao[').concat(index,'][curso]" name="formacoes[').concat(index,'][curso]" />\n      </div>\n    </div>');$("#formacoes-container").append(e),bindSelectChangeEvents(),index++}),bindSelectChangeEvents(),document.getElementById("email-Input").addEventListener("input",function(){var e=document.getElementById("erroEmail");(0,_functions.mascaraEmail)(this.value)?(e.innerHTML="",this.classList.remove("is-invalid")):(e.innerHTML="Verifique o endereço informado",this.classList.add("is-invalid"))}),document.getElementById("telefone-Input").addEventListener("input",function(){var e=(0,_functions.formatarTelefone)(this),n=document.getElementById("erroTel");e?(n.innerHTML="",this.classList.remove("is-invalid")):(n.innerHTML="Verifique o Telefone informado",this.classList.add("is-invalid"))});var formRecrutador=document.getElementById("form-recrutador");function SubmitRecrutador(){var e=$("#nome-Completo-recrutador").val(),n=$("#email-Input-Recrutador").val(),a=$("#telefone-Input-Recrutador").val(),o=$("#passwordRecrutador").val(),t=$("#nome-empresa").val(),r=(0,_functions.validacamposRecrutador)(e,n,a,o,t);(0,_functions.ErrorRecrudador)(r);var i={nome:e,email:n,phone:a,password:o,tipo:1,nameEmpresa:t},s=JSON.stringify(i);$.ajax({url:"/api/CadastroRecrutador",type:"post",dataType:"json",data:s,headers:{"X-CSRF-TOKEN":(0,_functions.pushToken)(),"Content-Type":"application/json",Accept:"application/json"},success:function(e){2==e.Status&&console.log(e)},error:function(e,n,a){var o=e.responseJSON.errors;for(var t in o)!function(n){o[n].forEach(function(e){$("#erroRecruiter").append('<p class="alert alert-danger"> '.concat(n,": ").concat(e,"</p>"))})}(t);console.error("Erro ao enviar:",a)}})}formRecrutador.addEventListener("submit",function(e){e.preventDefault(),SubmitRecrutador()}),document.getElementById("telefone-Input-Recrutador").addEventListener("input",function(){var e=(0,_functions.formatarTelefone)(this),n=document.getElementById("erroTel");e?(n.innerHTML="",this.classList.remove("is-invalid")):(n.innerHTML="Verifique o Telefone informado",this.classList.add("is-invalid"))}),document.getElementById("email-Input-Recrutador").addEventListener("input",function(){var e=document.getElementById("erroTel");(0,_functions.mascaraEmail)(this.value)?(e.innerHTML="",this.classList.remove("is-invalid")):(e.innerHTML="Verifique o endereço informado",this.classList.add("is-invalid"))});