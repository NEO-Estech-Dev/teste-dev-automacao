"use strict";var _functions=require("../functions.js");function _readOnlyError(t){throw new Error('"'+t+'" is read-only')}document.addEventListener("click",function(t){var a,n;t.target.classList.contains("btn-primary")&&(a=t.target.getAttribute("data-valor"),n=t.target.getAttribute("data-ativar"),funcao(a),ativeUser(n,a)),t.target.classList.contains("btn-danger")&&confirmDelete(t.target.getAttribute("data-valor")),t.target.classList.contains("btn-info")&&clearBusca(),t.target.classList.contains("btn-success")&&ativeUser(t.target.getAttribute("data-valor"),t.target.getAttribute("data-ativar"))}),document.addEventListener("DOMContentLoaded",function(){var a,n,e;regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return a={id:$("#id-user").val()},n=JSON.stringify(a),t.next=4,regeneratorRuntime.awrap((0,_functions.token)());case 4:e=t.sent,$.ajax({url:"/api/listUsers",type:"post",dataType:"json",data:n,headers:{Authorization:"Bearer "+e,"X-CSRF-TOKEN":(0,_functions.pushToken)(),"Content-Type":"application/json",Accept:"application/json"},success:function(t){2==t.Status?montarTable(t.data):alert(t.menssage)},error:function(t,a,n){console.error("Erro ao enviar:",n)}});case 6:case"end":return t.stop()}})});var armazenadados=[],paginaAtual=1,qtpagain=2,numberPagina=document.getElementById("valorProcura");function montarTable(t){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=((paginaAtual=a)-1)*qtpagain,e=n+qtpagain,r=(armazenadados=t).slice(n,e),o=document.getElementById("corpoTabela");o.innerHTML="",$.each(r,function(t,a){var n="\n<tr>\n    <td>".concat(a.idUsers,"</td><td>").concat(a.nomes,"</td><td>").concat(a.nivelUser,"</td><td>").concat(a.email,"</td><td>").concat(a.phone,"</td><td>").concat(a.genero,"</td><td>").concat(a.idFomacao,"</td>\n    <td>").concat(a.nameCurso,"</td><td>").concat(a.estado,"/").concat(a.cidade," </td><td>").concat(a.cv,"</td>\n    <td>").concat(a.info,'</td>\n    <td>\n    <div class="d-flex flex-row bd-highlight mb-3">\n\n        ').concat("Inativo"==a.info?'\n         <div class="p-2 bd-highlight">\n                    <button type="button" class="btn btn-success" data-valor="'.concat(a.idUsers,'" data-ativar="1"  data-target="#" >Ativar</button>\n                </div>  '):'\n         <div class="p-2 bd-highlight">\n        \n            <button type="button" class="btn btn-primary" data-valor="'.concat(a.idUsers,'" data-toggle="modal" data-target="#EditarDados">Editar</button>\n        </div>\n        <div class="p-2 bd-highlight">\n            <button type="button" class="btn btn-danger" data-valor="').concat(a.idUsers,'" data-target="#EditarDados" >Deletar</button>\n        </div>\n    </div>\n    </td>\n</tr>\n'));o.innerHTML+=n}),criarBotoesPaginacao(t.length,a)}function funcao(t){$("#ExemploModalCentralizado").modal("show")}numberPagina.addEventListener("keyup",function(){var t=$("#valorProcura").val();qtpagain=t?(_readOnlyError("qtpagain"),t):(_readOnlyError("qtpagain"),2)});var busca=document.getElementById("searchInput"),tabela=document.getElementById("corpoTabela");function clearBusca(){busca.value="",mostrarTodasAsLinhas()}function mostrarTodasAsLinhas(){for(var t=tabela.getElementsByTagName("tr"),a=0;a<t.length;a++)t[a].style.display=""}function confirmDelete(t){confirm("Deseja Deletar o UsuÃ¡rio do id :"+t)&&deletarUsuario(t)}function deletarUsuario(a){var n,e,r;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n={id:a},t.next=3,regeneratorRuntime.awrap((0,_functions.token)());case 3:e=t.sent,r=JSON.stringify(n),$.ajax({url:"api/Deletar ",type:"POST",dataType:"json",data:r,headers:{Authorization:"Bearer "+e,"X-CSRF-TOKEN":(0,_functions.pushToken)(),"Content-Type":"application/json",Accept:"application/json"},success:function(t){2==t.Status?console.log(t):alert(t.message)},error:function(t,a,n){console.log(t),console.error("Erro ao enviar:",n)}});case 6:case"end":return t.stop()}})}function ativeUser(a,n){var e,r,o;return regeneratorRuntime.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e={id:a,ative:n},t.next=3,regeneratorRuntime.awrap((0,_functions.token)());case 3:r=t.sent,o=JSON.stringify(e),$.ajax({url:"api/AtivarUser ",type:"POST",dataType:"json",data:o,headers:{Authorization:"Bearer "+r,"X-CSRF-TOKEN":(0,_functions.pushToken)(),"Content-Type":"application/json",Accept:"application/json"},success:function(t){2==t.Status?console.log(t):alert(t.message)},error:function(t,a,n){console.log(t),console.error("Erro ao enviar:",n)}});case 6:case"end":return t.stop()}})}function criarBotoesPaginacao(t,n){var a=Math.ceil(t/qtpagain),e=document.getElementById("paginacao");e.innerHTML="";for(var r=1;r<=a;r++)!function(t){var a=document.createElement("button");a.innerText=t,a.className="btn btn-sm btn-outline-primary mx-1",t==n&&a.classList.add("active"),a.onclick=function(){return montarTable(armazenadados,t)},e.appendChild(a)}(r)}busca.addEventListener("keyup",function(){var t=busca.value.toLowerCase();if(!(t.length<2)){var a=tabela.getElementsByTagName("tr");for(var n in a){1!=isNaN(n)&&(!0===a[n].innerHTML.toLowerCase().includes(t)?a[n].style.display="":a[n].style.display="none")}}});